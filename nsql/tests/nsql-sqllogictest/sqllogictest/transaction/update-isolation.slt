statement ok
CREATE TABLE t(id int PRIMARY KEY, x int);

statement ok
INSERT INTO t(id, x) VALUES (1, 1), (2, 2);

statement ok con1
BEGIN

statement ok con2
BEGIN READ ONLY

statement ok con1
UPDATE t SET x = 42 WHERE x = 2;

# con1 should be able to see the its own update
query I rowsort con1 
SELECT x FROM t;
----
1
42

# but con2 should still see the prior value
query I rowsort con2
SELECT x FROM t;
----
1
2

statement ok con1
COMMIT

# ditto after con1 commits
query I rowsort con2
SELECT x FROM t;
----
1
2
